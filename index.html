<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Wenitto – Toptan Sipariş</title>
<style>
  :root{--bg:#f7fafc;--panel:#fff;--border:#e5e7eb;--muted:#64748b;--text:#0f172a;
        --brand:#0ea5e9;--brand-2:#22d3ee;--shadow:0 10px 30px rgba(2,8,23,.06)}
  *{box-sizing:border-box} body{margin:0;background:var(--bg);color:var(--text);font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  img{display:block;max-width:100%}
  header{position:sticky;top:0;z-index:20;background:#ffffffd9;border-bottom:1px solid var(--border)}
  .wrap{max-width:1100px;margin:0 auto;padding:14px 16px}
  .flex{display:flex;align-items:center;gap:14px}.grow{flex:1}.logo img{height:40px}
  .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 16px}
  .tab{background:#fff;border:1px solid var(--border);border-radius:999px;padding:8px 14px;font-weight:700;cursor:pointer}
  .tab.active{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff;border-color:transparent}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px}
  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
  .thumb{height:350px;background:#eef6ff;display:flex;align-items:center;justify-content:center;overflow:hidden}
  .thumb img{height:100%;object-fit:cover}
  .pad{padding:12px}
  .title{font-weight:700}.muted{color:var(--muted)}.smallmuted{color:var(--muted);font-size:12px}
  .btn{border:0;border-radius:12px;padding:10px 12px;font-weight:700;cursor:pointer}
  .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#fff}
  .btn.ghost{background:#fff;color:#0f172a;border:1px solid var(--border)}.btn.block{width:100%}
  .drawer{position:fixed;right:16px;bottom:16px;width:min(460px,92vw);background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
  .drawer header{display:flex;gap:12px;align-items:center;padding:12px;border-bottom:1px solid var(--border)}
  .line{display:flex;gap:8px;align-items:center;justify-content:space-between;border-top:1px dashed var(--border);padding:10px 12px}
  dialog{border:1px solid var(--border);border-radius:16px;padding:0;background:var(--panel);color:var(--text);max-width:min(980px,96vw);box-shadow:var(--shadow)}
  dialog::backdrop{background:rgba(2,8,23,.35)}.modal-head{display:flex;gap:12px;align-items:center;padding:12px;border-bottom:1px solid var(--border)}
  .modal-body{display:grid;grid-template-columns:1.1fr 1fr}.modal-body img{width:100%;height:100%;object-fit:cover}
  .kv{display:grid;grid-template-columns:120px 1fr;gap:8px 12px;font-size:14px;color:var(--muted);padding:12px}
  .series{margin:12px;padding:12px;border:1px solid var(--border);border-radius:12px;background:#f8fafc}
  .series-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}
  .pill{padding:10px;border:1px solid var(--border);border-radius:12px;text-align:center;background:#fff;color:#0f172a}
  @media(max-width:800px){.modal-body{grid-template-columns:1fr}}
  .stock{font-weight:700}.stock.zero{color:#b91c1c}.stock.ok{color:#065f46}
</style>
</head>
<body>
<header>
  <div class="wrap flex">
    <div class="logo"><img src="wenitto-logo.png" alt="Wenitto"></div>
    <div class="grow"></div>
    <button id="btnOpenOrder" class="btn ghost">Sipariş Özeti</button>
  </div>
</header>

<main class="wrap" style="padding:20px 16px 120px">
  <nav id="tabs" class="tabs"></nav>
  <div id="grid" class="grid"></div>
</main>

<section id="drawer" class="drawer" hidden>
  <header><div style="font-weight:800">Sipariş Özeti</div><div class="grow"></div><button id="btnCloseOrder" class="btn ghost">Kapat</button></header>
  <div id="orderLines"></div>
  <div class="line"><div class="muted">Toplam Seri</div><div id="totalSeries">0</div></div>
  <div class="line"><div class="muted">Toplam Adet</div><div id="totalQty">0</div></div>
</section>

<dialog id="modal">
  <div class="modal-head"><div id="mTitle"></div><div class="grow"></div><button id="mClose" class="btn ghost">Kapat</button></div>
  <div class="modal-body">
    <div><img id="mImg"></div>
    <div>
      <div class="kv">
        <div>Kod</div><div id="mSku"></div>
        <div>Renk</div><div id="mColor"></div>
        <div>Stok</div><div id="mStock"></div>
      </div>
      <div class="series">
        <label>Kaç Seri?</label>
        <input id="seriesCount" type="number" min="1" value="1" style="width:80px">
        <button id="mAdd" class="btn primary" style="width:100%;margin-top:10px">Sepete Ekle</button>
      </div>
    </div>
  </div>
</dialog>

<script>
const CATEGORIES = ["Deri Ceket"];
let currentCat = "Deri Ceket";

/* Excel’den alınacak ürünleri SEED_INVENTORY’ye girdim */
const PRODUCTS = [
  { cat:"Deri Ceket", sku:"DRJKT001-BLK", name:"Deri Ceket Klasik", color:"Siyah", sizes:[46,48,50,52,54], img:"https://via.placeholder.com/400x500?text=DRJKT001-BLK" },
  { cat:"Deri Ceket", sku:"DRJKT001-BRN", name:"Deri Ceket Klasik", color:"Kahverengi", sizes:[46,48,50,52,54], img:"https://via.placeholder.com/400x500?text=DRJKT001-BRN" },
  { cat:"Deri Ceket", sku:"DRJKT001-NVY", name:"Deri Ceket Klasik", color:"Lacivert", sizes:[46,48,50,52,54], img:"https://via.placeholder.com/400x500?text=DRJKT001-NVY" }
];

/* Başlangıç stokları */
let INVENTORY = {
  "DRJKT001-BLK":7,
  "DRJKT001-BRN":4,
  "DRJKT001-NVY":6
};

const TABS=document.getElementById('tabs'),grid=document.getElementById('grid');
function renderTabs(){TABS.innerHTML=CATEGORIES.map(c=>`<button class="tab ${c===currentCat?'active':''}" data-cat="${c}">${c}</button>`).join('')}
TABS.addEventListener('click',e=>{const b=e.target.closest('.tab');if(!b)return;currentCat=b.dataset.cat;renderTabs();renderGrid();});

function renderGrid(){
  const list=PRODUCTS.filter(p=>p.cat===currentCat);
  grid.innerHTML=list.map(p=>{
    const stock=INVENTORY[p.sku]||0;
    return `<article class="card">
      <div class="thumb"><img src="${p.img}" alt=""></div>
      <div class="pad">
        <div class="title">${p.name} – ${p.color}</div>
        <div class="smallmuted">${p.sku}</div>
        <div class="smallmuted">Stok: <b>${stock}</b> seri</div>
        <button class="btn block primary" data-sku="${p.sku}" ${stock<=0?'disabled':''}>İncele</button>
      </div>
    </article>`;
  }).join('');
}

/* Modal */
const modal=document.getElementById('modal'),mTitle=document.getElementById('mTitle'),mSku=document.getElementById('mSku'),
      mColor=document.getElementById('mColor'),mImg=document.getElementById('mImg'),mStock=document.getElementById('mStock'),
      seriesCount=document.getElementById('seriesCount'),mAdd=document.getElementById('mAdd');

let currentProduct=null;
grid.addEventListener('click',e=>{
  const btn=e.target.closest('[data-sku]');if(!btn)return;
  const p=PRODUCTS.find(x=>x.sku===btn.dataset.sku);if(!p)return;
  currentProduct=p; mTitle.textContent=p.name; mSku.textContent=p.sku; mColor.textContent=p.color;
  mImg.src=p.img; mStock.textContent=(INVENTORY[p.sku]||0)+" seri"; seriesCount.value=1;
  modal.showModal();
});
document.getElementById('mClose').addEventListener('click',()=>modal.close());

/* Sepet */
const drawer=document.getElementById('drawer'),orderLines=document.getElementById('orderLines'),
      totalSeries=document.getElementById('totalSeries'),totalQty=document.getElementById('totalQty');
let CART=new Map();
document.getElementById('btnOpenOrder').addEventListener('click',()=>drawer.hidden=false);
document.getElementById('btnCloseOrder').addEventListener('click',()=>drawer.hidden=true);

mAdd.addEventListener('click',()=>{
  const count=parseInt(seriesCount.value||'1'); const stock=INVENTORY[currentProduct.sku]||0;
  if(count>stock){alert("Yetersiz stok");return;}
  const prev=CART.get(currentProduct.sku)||{series:0};
  CART.set(currentProduct.sku,{...currentProduct,series:prev.series+count});
  INVENTORY[currentProduct.sku]=stock-count; // stok düş
  modal.close(); renderOrder(); renderGrid();
});

function renderOrder(){
  let html='',ts=0,tq=0;
  for(const item of CART.values()){
    const qty=item.series*item.sizes.length; ts+=item.series; tq+=qty;
    html+=`<div class="line"><div>${item.name} – ${item.color}<br>${item.sku}<br>${item.series} seri = ${qty} adet</div></div>`;
  }
  orderLines.innerHTML=html||'<div class="line">Sepet boş</div>';
  totalSeries.textContent=ts; totalQty.textContent=tq;
}

/* Init */
renderTabs(); renderGrid();
</script>
</body>
</html>
